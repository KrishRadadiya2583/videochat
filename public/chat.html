<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat | Connect</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="app-container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 13.4876 3.36093 14.891 4 16.1272L3 21L7.8728 20C9.10898 20.6391 10.5124 21 12 21Z"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <span>Connect</span>
        </div>
      </div>

      <div class="sidebar-content">
        <div class="section-label">Online Users</div>
        <ul id="users" class="users-list"></ul>
      </div>

      <div class="sidebar-footer">
        <button id="leaveChatBtn" class="btn btn-danger btn-full">
          <svg viewBox="0 0 24 24" fill="none" width="20" height="20" stroke="currentColor" stroke-width="2">
            <path d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
              stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <span>Leave Room</span>
        </button>
      </div>
    </aside>

    <main class="chat-main">
      <header class="chat-header">
        <div class="room-info">
          <button id="menuToggle" class="icon-btn mobile-only" title="Toggle Menu">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </button>
          <div>
            <h2 id="roomName">General</h2>
            <div class="room-status"><span class="status-dot"></span> Active</div>
          </div>
        </div>

        <div class="header-actions">
          <button id="audioCallBtn" class="icon-btn" title="Audio Call">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path
                d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </button>
          <button id="videoCallBtn" class="icon-btn" title="Video Call">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path
                d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"
                stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </button>
        </div>
      </header>

      <div class="chat-viewport">
        <div id="messages" class="messages-container"></div>
        <div id="typing" class="typing-indicator"></div>
      </div>

      <footer class="chat-footer">
        <form id="msgForm" class="message-form">
          <input id="msg" type="text" placeholder="Type a message..." autocomplete="off" />
          <button type="submit" class="send-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </button>
        </form>
      </footer>
    </main>
  </div>

  <!-- Incoming Call Modal -->
  <div id="incomingCallModal" class="modal hidden">
    <div class="modal-content glass-card">
      <div class="caller-avatar">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
      </div>
      <h3>Incoming Call</h3>
      <p id="callerName">Someone is calling...</p>
      <div class="modal-actions">
        <button id="acceptCallBtn" class="btn btn-success">Accept</button>
        <button id="rejectCallBtn" class="btn btn-danger">Reject</button>
      </div>
    </div>
  </div>

  <!-- Video Call Container -->
  <div id="callContainer" class="call-container hidden">
    <div id="videoGrid" class="video-grid"></div>
    <div class="call-controls">
      <button id="toggleMicBtn" class="control-btn" title="Toggle Mic">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path
            d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"
            stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>
      <button id="toggleVideoBtn" class="control-btn" title="Toggle Video">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path
            d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"
            stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>
      <button id="leaveCallBtn" class="control-btn leave-btn" title="End Call">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path
            d="M16 8l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2M5 3a2 2 0 00-2 2v1c0 8.284 6.716 15 15 15h1a2 2 0 002-2v-3.28a1 1 0 00-.684-.948l-4.493-1.498a1 1 0 00-1.21.502l-1.13 2.257a11.042 11.042 0 01-5.516-5.516l2.257-1.13a1 1 0 00.502-1.21L9.228 3.683A1 1 0 008.279 3H5z"
            stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </button>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="main.js"></script>
</body>

</html>